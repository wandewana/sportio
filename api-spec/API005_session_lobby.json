{
  "module": "Session Lobby (Wait)",
  "description": "Session lobby where host waits for players to join",
  "rest_endpoints": [
    {
      "method": "GET",
      "path": "/api/v1/sessions/{session_id}/lobby",
      "description": "Get session lobby details including joined players",
      "request": {
        "headers": { "Authorization": "Bearer ..." },
        "path_params": { "session_id": "sess_001" }
      },
      "response": {
        "status": 200,
        "body": {
          "session": {
            "id": "sess_001",
            "sport_type": "badminton",
            "sport_icon": "üè∏",
            "title": "Badminton",
            "time": "19:00",
            "players_needed": 4,
            "players_joined": 0,
            "spots_left": 4,
            "min_players_to_book": 2,
            "can_lock_and_book": false,
            "status": "pending"
          },
          "host": {
            "id": "usr_abc123",
            "name": "Alex B",
            "avatar_initials": "AB",
            "skill_level": "Intermediate",
            "games_played": 120
          },
          "players": [],
          "auto_match": {
            "enabled": true,
            "description": "Sportio will recommend players nearby who are free during this time."
          }
        }
      },
      "error_responses": [
        { "status": 404, "body": { "error": "session_not_found", "message": "Session not found" } },
        { "status": 401, "body": { "error": "unauthorized", "message": "Authentication required" } }
      ]
    },
    {
      "method": "POST",
      "path": "/api/v1/sessions/{session_id}/invite",
      "description": "Send invite to specific players",
      "request": {
        "headers": { "Authorization": "Bearer ...", "Content-Type": "application/json" },
        "path_params": { "session_id": "sess_001" },
        "body": {
          "user_ids": ["usr_def456", "usr_ghi789"],
          "message": "Join our badminton session!"
        }
      },
      "response": {
        "status": 200,
        "body": {
          "invites_sent": 2,
          "message": "Invitations sent successfully"
        }
      },
      "error_responses": [
        { "status": 400, "body": { "error": "session_full", "message": "Session is already full" } },
        { "status": 403, "body": { "error": "not_host", "message": "Only host can send invites" } }
      ]
    },
    {
      "method": "GET",
      "path": "/api/v1/sessions/{session_id}/auto-match",
      "description": "Get auto-matched player suggestions",
      "request": {
        "headers": { "Authorization": "Bearer ..." },
        "path_params": { "session_id": "sess_001" }
      },
      "response": {
        "status": 200,
        "body": {
          "suggestions": [
            {
              "id": "usr_xyz111",
              "name": "Chris M",
              "avatar_initials": "CM",
              "skill_level": "Intermediate",
              "games_played": 45,
              "distance_km": 0.8,
              "availability_match": "high"
            }
          ]
        }
      },
      "error_responses": []
    }
  ],
  "websocket_events": [
    {
      "event": "lobby:player_joined",
      "direction": "subscribe",
      "payload": {
        "session_id": "sess_001",
        "player": {
          "id": "usr_def456",
          "name": "Mike K",
          "avatar_initials": "MK",
          "skill_level": "Beginner",
          "games_played": 15
        },
        "players_joined": 2,
        "spots_left": 2,
        "can_lock_and_book": true
      },
      "description": "Real-time update when a player joins the session"
    },
    {
      "event": "lobby:player_left",
      "direction": "subscribe",
      "payload": {
        "session_id": "sess_001",
        "player_id": "usr_def456",
        "players_joined": 1,
        "spots_left": 3,
        "can_lock_and_book": false
      },
      "description": "Real-time update when a player leaves the session"
    }
  ],
  "push_notifications": [
    {
      "trigger": "Player joins the session",
      "title": "New player joined!",
      "body": "Mike K joined your Badminton session",
      "data": { "deeplink": "sportio://session/sess_001/lobby" }
    }
  ],
  "third_party_integrations": []
}

